<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨ - AQRAB</title>
  <link rel="icon" type="image/x-icon" href="logo.ico">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Cairo', sans-serif; }
    .progress-step {
      transition: all 0.3s ease;
    }
    .progress-step.active {
      transform: scale(1.1);
    }
    .progress-line {
      transition: all 0.5s ease;
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">
  <!-- Header -->
  <header class="bg-white shadow-sm border-b">
    <div class="max-w-4xl mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 bg-black rounded-lg flex items-center justify-center">
            <i class="fa-solid fa-clock text-white"></i>
          </div>
          <div>
            <h1 class="text-xl font-bold text-gray-800">AQRAB</h1>
            <p class="text-sm text-gray-600">ØªØªØ¨Ø¹ Ø·Ù„Ø¨Ùƒ</p>
          </div>
        </div>
        <a href="index.html" class="text-gray-600 hover:text-black transition">
          <i class="fa-solid fa-home text-lg"></i>
        </a>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-4xl mx-auto px-4 py-8">
    <!-- Welcome Message -->
    <div id="welcomeMessage" class="hidden bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
      <div class="flex items-center gap-3">
        <i class="fa-solid fa-party-horn text-blue-600 text-xl"></i>
        <div>
          <h3 class="font-semibold text-blue-800">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ!</h3>
          <p class="text-sm text-blue-700">ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØªØ¨Ø¹ Ø­Ø§Ù„Ø© Ø·Ù„Ø¨Ùƒ Ø£Ø¯Ù†Ø§Ù‡.</p>
        </div>
      </div>
    </div>

    <!-- Search Section -->
    <div class="bg-white rounded-lg shadow-sm p-6 mb-8">
      <h2 class="text-lg font-bold text-gray-800 mb-4">
        <i class="fa-solid fa-search ml-2"></i>
        Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø·Ù„Ø¨Ùƒ
      </h2>
      <div class="flex gap-4">
        <div class="flex-1">
          <input
            type="text"
            id="phoneSearch"
            placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ù…Ø«Ø§Ù„: 01012345678)"
            class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
          >
        </div>
        <button
          id="searchBtn"
          class="bg-black hover:bg-gray-800 text-white px-6 py-3 rounded-lg font-semibold transition"
        >
          <i class="fa-solid fa-search ml-2"></i>
          Ø¨Ø­Ø«
        </button>
      </div>
    </div>

    <!-- Multiple Orders Selection -->
    <div id="multipleOrders" class="hidden bg-white rounded-lg shadow-sm p-6 mb-8">
      <h3 class="text-lg font-bold text-gray-800 mb-4">
        <i class="fa-solid fa-list ml-2"></i>
        ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¹Ø¯Ø© Ø·Ù„Ø¨Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù…
      </h3>
      <p class="text-gray-600 mb-4">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ ØªØªØ¨Ø¹Ù‡:</p>
      <div id="ordersList" class="space-y-3">
        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù‡Ù†Ø§ -->
      </div>
    </div>

    <!-- Order Info Section -->
    <div id="orderInfo" class="hidden bg-white rounded-lg shadow-sm p-6 mb-8">
      <h3 class="text-lg font-bold text-gray-800 mb-4">
        <i class="fa-solid fa-info-circle ml-2"></i>
        Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨
      </h3>
      <div class="grid md:grid-cols-2 gap-4">
        <div>
          <p class="text-sm text-gray-600">Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</p>
          <p id="orderNumber" class="font-semibold text-gray-800">-</p>
        </div>
        <div>
          <p class="text-sm text-gray-600">Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</p>
          <p id="customerName" class="font-semibold text-gray-800">-</p>
        </div>
        <div>
          <p class="text-sm text-gray-600">Ø§Ù„Ù…Ù†ØªØ¬</p>
          <p id="productName" class="font-semibold text-gray-800">-</p>
        </div>
        <div>
          <p class="text-sm text-gray-600">Ø§Ù„ÙƒÙ…ÙŠØ©</p>
          <p id="orderQuantity" class="font-semibold text-gray-800">-</p>
        </div>
        <div>
          <p class="text-sm text-gray-600">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨</p>
          <p id="orderDate" class="font-semibold text-gray-800">-</p>
        </div>
      </div>

      <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª -->
      <div class="mt-4 pt-4 border-t border-gray-200 flex flex-col sm:flex-row gap-3">
        <button id="backToList" class="text-blue-600 hover:text-blue-800 text-sm font-medium transition flex items-center gap-2">
          <i class="fa-solid fa-arrow-right"></i>
          Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
        </button>
        <button id="requestReturn" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 hover:scale-105 flex items-center gap-2">
          <i class="fa-solid fa-undo"></i>
          Ø·Ù„Ø¨ Ø¥Ø±Ø¬Ø§Ø¹
        </button>
      </div>
    </div>

    <!-- Progress Tracker -->
    <div id="progressTracker" class="hidden bg-white rounded-lg shadow-sm p-6">
      <h3 class="text-lg font-bold text-gray-800 mb-6">
        <i class="fa-solid fa-truck ml-2"></i>
        Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨
      </h3>
      
      <!-- Progress Bar -->
      <div class="relative">
        <!-- Progress Line -->
        <div class="absolute top-6 right-6 left-6 h-1 bg-gray-200 rounded-full">
          <div id="progressLine" class="progress-line h-full bg-green-500 rounded-full" style="width: 0%"></div>
        </div>
        
        <!-- Progress Steps -->
        <div class="relative flex justify-between">
          <!-- Step 1: Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ± -->
          <div class="progress-step flex flex-col items-center" data-status="pending">
            <div class="w-12 h-12 rounded-full border-4 border-gray-300 bg-white flex items-center justify-center mb-2">
              <i class="fa-solid fa-clock text-gray-400"></i>
            </div>
            <p class="text-sm font-medium text-gray-600 text-center">Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±</p>
          </div>
          
          <!-- Step 2: ØªÙ… Ø§Ù„Ø´Ø­Ù† -->
          <div class="progress-step flex flex-col items-center" data-status="shipped">
            <div class="w-12 h-12 rounded-full border-4 border-gray-300 bg-white flex items-center justify-center mb-2">
              <i class="fa-solid fa-box text-gray-400"></i>
            </div>
            <p class="text-sm font-medium text-gray-600 text-center">ØªÙ… Ø§Ù„Ø´Ø­Ù†</p>
          </div>
          
          <!-- Step 3: ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ -->
          <div class="progress-step flex flex-col items-center" data-status="on_the_way">
            <div class="w-12 h-12 rounded-full border-4 border-gray-300 bg-white flex items-center justify-center mb-2">
              <i class="fa-solid fa-truck text-gray-400"></i>
            </div>
            <p class="text-sm font-medium text-gray-600 text-center">ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚</p>
          </div>
          
          <!-- Step 4: ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„ -->
          <div class="progress-step flex flex-col items-center" data-status="delivered">
            <div class="w-12 h-12 rounded-full border-4 border-gray-300 bg-white flex items-center justify-center mb-2">
              <i class="fa-solid fa-home text-gray-400"></i>
            </div>
            <p class="text-sm font-medium text-gray-600 text-center">ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„</p>
          </div>
          
          <!-- Step 5: ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… -->
          <div class="progress-step flex flex-col items-center" data-status="received">
            <div class="w-12 h-12 rounded-full border-4 border-gray-300 bg-white flex items-center justify-center mb-2">
              <i class="fa-solid fa-check text-gray-400"></i>
            </div>
            <p class="text-sm font-medium text-gray-600 text-center">ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</p>
          </div>
        </div>
      </div>
      
      <!-- Current Status Message -->
      <div id="statusMessage" class="mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg">
        <div class="flex items-center gap-3">
          <i id="statusIcon" class="fa-solid fa-info-circle text-blue-600 text-xl"></i>
          <div>
            <p id="statusTitle" class="font-semibold text-blue-800">Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</p>
            <p id="statusDescription" class="text-sm text-blue-700">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø·Ù„Ø¨Ùƒ Ø£ÙˆÙ„Ø§Ù‹</p>
          </div>
        </div>
      </div>
    </div>

    <!-- No Results -->
    <div id="noResults" class="hidden bg-white rounded-lg shadow-sm p-8 text-center">
      <i class="fa-solid fa-search text-gray-400 text-4xl mb-4"></i>
      <h3 class="text-lg font-semibold text-gray-800 mb-2">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø·Ù„Ø¨Ø§Øª</h3>
      <p class="text-gray-600">ØªØ£ÙƒØ¯ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙˆØ­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</p>
    </div>
  </main>

  <!-- Ù†Ø§ÙØ°Ø© Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ -->
  <div id="returnModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
    <div class="bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl">
      <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
        <i class="fa-solid fa-undo text-red-600"></i>
        Ø·Ù„Ø¨ Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ù†ØªØ¬
      </h3>

      <form id="returnForm">
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Ø³Ø¨Ø¨ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹</label>
            <select id="returnReason" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500" required>
              <option value="">Ø§Ø®ØªØ± Ø³Ø¨Ø¨ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹</option>
              <option value="defective">Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ø¹ÙŠØ¨</option>
              <option value="wrong_item">Ù…Ù†ØªØ¬ Ø®Ø§Ø·Ø¦</option>
              <option value="not_as_described">Ù„Ø§ ÙŠØ·Ø§Ø¨Ù‚ Ø§Ù„ÙˆØµÙ</option>
              <option value="damaged">ÙˆØµÙ„ ØªØ§Ù„Ù</option>
              <option value="changed_mind">ØªØºÙŠÙŠØ± ÙÙŠ Ø§Ù„Ø±Ø£ÙŠ</option>
              <option value="other">Ø£Ø®Ø±Ù‰</option>
            </select>
          </div>

          <div id="otherReasonDiv" class="hidden">
            <label class="block text-sm font-medium text-gray-700 mb-2">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³Ø¨Ø¨</label>
            <textarea id="otherReason" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500" rows="3" placeholder="Ø§ÙƒØªØ¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³Ø¨Ø¨..."></textarea>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Ù…Ø¨Ù„Øº Ø§Ù„Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨</label>
            <input type="number" id="refundAmount" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500" placeholder="400" required>
            <p class="text-xs text-gray-500 mt-1">Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ø¨Ù„Øº Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</p>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
            <textarea id="additionalDetails" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500" rows="3" placeholder="Ø£ÙŠ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ© ØªÙˆØ¯ Ø¥Ø¶Ø§ÙØªÙ‡Ø§..."></textarea>
          </div>

          <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3">
            <p class="text-sm text-yellow-800">
              <i class="fa-solid fa-info-circle ml-1"></i>
              Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ ÙˆØ§Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙƒ Ø®Ù„Ø§Ù„ 24-48 Ø³Ø§Ø¹Ø©
            </p>
          </div>
        </div>

        <div class="flex gap-3 mt-6">
          <button type="button" id="cancelReturn" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-lg font-medium transition">
            Ø¥Ù„ØºØ§Ø¡
          </button>
          <button type="submit" class="flex-1 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg font-medium transition">
            Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-white border-t mt-12">
    <div class="max-w-4xl mx-auto px-4 py-6 text-center">
      <p class="text-gray-600 text-sm">
        Â© 2025 AQRAB. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.
      </p>
    </div>
  </footer>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
  import { getFirestore, collection, query, where, getDocs, onSnapshot, doc, addDoc } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDeFqpa8MtVF5r3kKLfYZdM3EgPZCs3zeI",
    authDomain: "zamman-admin.firebaseapp.com",
    projectId: "zamman-admin",
    storageBucket: "zamman-admin.firebasestorage.app",
    messagingSenderId: "910842307850",
    appId: "1:910842307850:web:b7548b7a3323e1a19046f3"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // ØªØ±Ø¬Ù…Ø© Ø§Ù„Ø­Ø§Ù„Ø§Øª
  const statusTranslations = {
    'pending': 'Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±',
    'shipped': 'ØªÙ… Ø§Ù„Ø´Ø­Ù†',
    'on_the_way': 'ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚',
    'delivered': 'ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„',
    'received': 'ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…'
  };

  const statusMessages = {
    'pending': {
      title: 'Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±',
      description: 'Ø·Ù„Ø¨Ùƒ Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ± ÙˆØ³ÙŠØªÙ… Ø´Ø­Ù†Ù‡ Ù‚Ø±ÙŠØ¨Ø§Ù‹',
      icon: 'fa-clock',
      color: 'yellow'
    },
    'shipped': {
      title: 'ØªÙ… Ø§Ù„Ø´Ø­Ù†',
      description: 'ØªÙ… Ø´Ø­Ù† Ø·Ù„Ø¨Ùƒ ÙˆÙ‡Ùˆ ÙÙŠ Ø·Ø±ÙŠÙ‚Ù‡ Ø¥Ù„ÙŠÙƒ',
      icon: 'fa-box',
      color: 'blue'
    },
    'on_the_way': {
      title: 'ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚',
      description: 'Ø·Ù„Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø¥Ù„ÙŠÙƒ ÙˆØ³ÙŠØµÙ„ Ù‚Ø±ÙŠØ¨Ø§Ù‹',
      icon: 'fa-truck',
      color: 'purple'
    },
    'delivered': {
      title: 'ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„',
      description: 'ØªÙ… ØªÙˆØµÙŠÙ„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­',
      icon: 'fa-home',
      color: 'green'
    },
    'received': {
      title: 'ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…',
      description: 'ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­. Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ!',
      icon: 'fa-check',
      color: 'green'
    }
  };

  let currentOrderListener = null;
  let allOrders = []; // Ù„Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª

  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø±Ù‚Ù… ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·
  function checkURLParams() {
    const urlParams = new URLSearchParams(window.location.search);
    const phoneFromURL = urlParams.get('phone');

    if (phoneFromURL) {
      // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨
      document.getElementById('welcomeMessage').classList.remove('hidden');

      // Ù…Ù„Ø¡ Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø±Ù‚Ù…
      document.getElementById('phoneSearch').value = phoneFromURL;

      // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
      const searchBtn = document.getElementById('searchBtn');
      const originalText = searchBtn.innerHTML;
      searchBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin ml-2"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...';
      searchBtn.disabled = true;

      // Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ± Ù‚ØµÙŠØ±
      setTimeout(() => {
        searchOrder().finally(() => {
          // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø²Ø±
          searchBtn.innerHTML = originalText;
          searchBtn.disabled = false;
        });
      }, 1000);

      // Ø¥Ø®ÙØ§Ø¡ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ Ø¨Ø¹Ø¯ 8 Ø«ÙˆØ§Ù†
      setTimeout(() => {
        document.getElementById('welcomeMessage').classList.add('hidden');
      }, 8000);
    }
  }

  // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø·Ù„Ø¨
  document.getElementById('searchBtn').addEventListener('click', searchOrder);
  document.getElementById('phoneSearch').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') searchOrder();
  });

  // ØªØ´ØºÙŠÙ„ ÙØ­Øµ Ø§Ù„Ø±Ø§Ø¨Ø· Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
  window.addEventListener('load', checkURLParams);

  // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
  document.getElementById('backToList').addEventListener('click', () => {
    showMultipleOrders();
  });

  async function searchOrder() {
    const phone = document.getElementById('phoneSearch').value.trim();

    if (!phone) {
      alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ');
      return;
    }

    // ØªÙ†Ø³ÙŠÙ‚ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
    const formattedPhone = phone.startsWith('+2') ? phone : `+2${phone}`;

    try {
      const q = query(collection(db, "orders"), where("phone", "==", formattedPhone));
      const querySnapshot = await getDocs(q);

      if (querySnapshot.empty) {
        showNoResults();
        return;
      }

      // Ø¬Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
      allOrders = [];
      querySnapshot.forEach((doc) => {
        allOrders.push({
          id: doc.id,
          data: doc.data()
        });
      });

      // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ® (Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹)
      allOrders.sort((a, b) => new Date(b.data.date) - new Date(a.data.date));

      if (allOrders.length === 1) {
        // Ø·Ù„Ø¨ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· - Ø¹Ø±Ø¶Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø©
        displayOrder(allOrders[0].data, allOrders[0].id);
        setupRealTimeTracking(allOrders[0].id);
      } else {
        // Ø¹Ø¯Ø© Ø·Ù„Ø¨Ø§Øª - Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±
        showMultipleOrders();
      }

    } catch (error) {
      console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø«:", error);
      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø«');
    }
  }

  function showMultipleOrders() {
    const ordersList = document.getElementById('ordersList');
    ordersList.innerHTML = '';

    allOrders.forEach((orderItem, index) => {
      const order = orderItem.data;
      const orderDate = new Date(order.date);
      const statusText = statusTranslations[order.status || 'pending'];
      const statusColor = getStatusColor(order.status || 'pending');

      const orderCard = document.createElement('div');
      orderCard.className = 'border border-gray-200 rounded-lg p-4 hover:border-blue-300 cursor-pointer transition';
      orderCard.innerHTML = `
        <div class="flex items-center justify-between">
          <div class="flex-1">
            <div class="flex items-center gap-3 mb-2">
              <h4 class="font-semibold text-gray-800">${order.product || 'Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</h4>
              <span class="px-2 py-1 text-xs rounded-full ${statusColor}">
                ${statusText}
              </span>
            </div>
            <div class="text-sm text-gray-600 space-y-1">
              <p><i class="fa-solid fa-hashtag ml-1"></i> Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: ${orderItem.id.substring(0, 8).toUpperCase()}</p>
              <p><i class="fa-solid fa-calendar ml-1"></i> ${orderDate.toLocaleDateString('ar-EG', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
              })}</p>
              <p><i class="fa-solid fa-box ml-1"></i> Ø§Ù„ÙƒÙ…ÙŠØ©: ${order.quantity || 1}</p>
            </div>
          </div>
          <div class="text-blue-600">
            <i class="fa-solid fa-chevron-left"></i>
          </div>
        </div>
      `;

      orderCard.addEventListener('click', () => {
        displayOrder(order, orderItem.id);
        setupRealTimeTracking(orderItem.id);
      });

      ordersList.appendChild(orderCard);
    });

    // Ø¥Ø¸Ù‡Ø§Ø± Ù‚Ø³Ù… Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©
    document.getElementById('multipleOrders').classList.remove('hidden');
    document.getElementById('orderInfo').classList.add('hidden');
    document.getElementById('progressTracker').classList.add('hidden');
    document.getElementById('noResults').classList.add('hidden');
  }

  function displayOrder(order, orderId = null) {
    // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨
    document.getElementById('orderNumber').textContent = orderId ? orderId.substring(0, 8).toUpperCase() : '-';
    document.getElementById('customerName').textContent = order.name || '-';
    document.getElementById('productName').textContent = order.product || '-';
    document.getElementById('orderQuantity').textContent = order.quantity || '-';

    const orderDate = new Date(order.date);
    document.getElementById('orderDate').textContent = orderDate.toLocaleDateString('ar-EG', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });

    // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
    document.getElementById('multipleOrders').classList.add('hidden');
    document.getElementById('orderInfo').classList.remove('hidden');
    document.getElementById('progressTracker').classList.remove('hidden');
    document.getElementById('noResults').classList.add('hidden');

    // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
    updateProgressBar(order.status || 'pending');
  }

  function getStatusColor(status) {
    const colors = {
      'pending': 'bg-yellow-100 text-yellow-800',
      'shipped': 'bg-blue-100 text-blue-800',
      'on_the_way': 'bg-purple-100 text-purple-800',
      'delivered': 'bg-green-100 text-green-800',
      'received': 'bg-gray-100 text-gray-800'
    };
    return colors[status] || colors['pending'];
  }

  function setupRealTimeTracking(orderId) {
    // Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
    if (currentOrderListener) {
      currentOrderListener();
    }

    // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©
    currentOrderListener = onSnapshot(doc(db, "orders", orderId), (doc) => {
      if (doc.exists()) {
        const order = doc.data();
        updateProgressBar(order.status || 'pending');
      }
    });
  }

  function updateProgressBar(status) {
    const steps = ['pending', 'shipped', 'on_the_way', 'delivered', 'received'];
    const currentStepIndex = steps.indexOf(status);
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø·ÙˆØ§Øª
    steps.forEach((stepStatus, index) => {
      const stepElement = document.querySelector(`[data-status="${stepStatus}"]`);
      const circle = stepElement.querySelector('div');
      const icon = stepElement.querySelector('i');
      const text = stepElement.querySelector('p');
      
      if (index <= currentStepIndex) {
        // Ø®Ø·ÙˆØ© Ù…ÙƒØªÙ…Ù„Ø© Ø£Ùˆ Ø­Ø§Ù„ÙŠØ©
        circle.className = 'w-12 h-12 rounded-full border-4 border-green-500 bg-green-500 flex items-center justify-center mb-2';
        icon.className = icon.className.replace('text-gray-400', 'text-white');
        text.className = 'text-sm font-medium text-green-600 text-center';
        
        if (index === currentStepIndex) {
          stepElement.classList.add('active');
        }
      } else {
        // Ø®Ø·ÙˆØ© ØºÙŠØ± Ù…ÙƒØªÙ…Ù„Ø©
        circle.className = 'w-12 h-12 rounded-full border-4 border-gray-300 bg-white flex items-center justify-center mb-2';
        icon.className = icon.className.replace('text-white', 'text-gray-400');
        text.className = 'text-sm font-medium text-gray-600 text-center';
        stepElement.classList.remove('active');
      }
    });
    
    // ØªØ­Ø¯ÙŠØ« Ø®Ø· Ø§Ù„ØªÙ‚Ø¯Ù…
    const progressPercentage = (currentStepIndex / (steps.length - 1)) * 100;
    document.getElementById('progressLine').style.width = `${progressPercentage}%`;
    
    // ØªØ­Ø¯ÙŠØ« Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„Ø©
    updateStatusMessage(status);
  }

  function updateStatusMessage(status) {
    const message = statusMessages[status];
    const statusMessage = document.getElementById('statusMessage');
    const statusIcon = document.getElementById('statusIcon');
    const statusTitle = document.getElementById('statusTitle');
    const statusDescription = document.getElementById('statusDescription');
    
    statusIcon.className = `fa-solid ${message.icon} text-${message.color}-600 text-xl`;
    statusTitle.textContent = message.title;
    statusDescription.textContent = message.description;
    
    statusMessage.className = `mt-8 p-4 bg-${message.color}-50 border border-${message.color}-200 rounded-lg`;
  }

  function showNoResults() {
    document.getElementById('multipleOrders').classList.add('hidden');
    document.getElementById('orderInfo').classList.add('hidden');
    document.getElementById('progressTracker').classList.add('hidden');
    document.getElementById('noResults').classList.remove('hidden');
  }

  // Ù…ØªØºÙŠØ± Ù„Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
  let currentOrderData = null;

  // Ø¥Ø¯Ø§Ø±Ø© Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹
  document.getElementById('requestReturn')?.addEventListener('click', () => {
    if (currentOrderData) {
      document.getElementById('returnModal').classList.remove('hidden');
    } else {
      alert('ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø·Ù„Ø¨Ùƒ Ø£ÙˆÙ„Ø§Ù‹');
    }
  });

  // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹
  document.getElementById('cancelReturn')?.addEventListener('click', () => {
    document.getElementById('returnModal').classList.add('hidden');
  });

  // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø­Ù‚Ù„ Ø§Ù„Ø³Ø¨Ø¨ Ø§Ù„Ø¢Ø®Ø±
  document.getElementById('returnReason')?.addEventListener('change', (e) => {
    const otherDiv = document.getElementById('otherReasonDiv');
    if (e.target.value === 'other') {
      otherDiv.classList.remove('hidden');
    } else {
      otherDiv.classList.add('hidden');
    }
  });

  // Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹
  document.getElementById('returnForm')?.addEventListener('submit', async (e) => {
    e.preventDefault();

    const returnReason = document.getElementById('returnReason').value;
    const otherReason = document.getElementById('otherReason').value;
    const refundAmount = document.getElementById('refundAmount').value;
    const additionalDetails = document.getElementById('additionalDetails').value;

    if (!currentOrderData) {
      alert('Ø®Ø·Ø£: Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø·Ù„Ø¨');
      return;
    }

    try {
      // Ø¥Ø¸Ù‡Ø§Ø± Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
      const submitBtn = e.target.querySelector('button[type="submit"]');
      const originalText = submitBtn.textContent;
      submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';
      submitBtn.disabled = true;

      // ØªØ­Ø¶ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹
      const returnData = {
        orderId: currentOrderData.id,
        customerName: currentOrderData.name,
        customerPhone: currentOrderData.phone,
        productName: currentOrderData.product || 'Ø³Ø§Ø¹Ø© ÙƒØ±Ø¨ÙˆÙ† Ø£Ø³ÙˆØ¯ â€” Ø£Ø±Ù‚Ø§Ù… Ø¹Ø±Ø¨ÙŠØ©',
        quantity: currentOrderData.quantity || 1,
        originalPrice: currentOrderData.price || currentOrderData.totalBeforeDiscount || 400,
        returnReason: returnReason === 'other' ? otherReason : getReasonText(returnReason),
        additionalDetails: additionalDetails || '',
        returnDate: new Date().toISOString(),
        status: 'pending',
        refundAmount: parseInt(refundAmount),
        adminNotes: '',
        timestamp: new Date(),
        // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©
        orderDate: currentOrderData.date,
        orderStatus: currentOrderData.status
      };

      // Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ø¥Ù„Ù‰ Firebase
      await addDoc(collection(db, "returns"), returnData);

      // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø£Ø¯Ù…Ù†
      await sendReturnNotificationToAdmin(returnData);

      // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­ Ù…ÙØµÙ„Ø©
      const successMessage = `âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ø¨Ù†Ø¬Ø§Ø­!

ğŸ“‹ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨:
â€¢ Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: ${currentOrderData.id.substring(0, 8).toUpperCase()}
â€¢ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: ${refundAmount} Ø¬Ù†ÙŠÙ‡
â€¢ Ø§Ù„Ø³Ø¨Ø¨: ${returnReason === 'other' ? otherReason : getReasonText(returnReason)}

â° Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø·Ù„Ø¨Ùƒ ÙˆØ§Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙƒ Ø®Ù„Ø§Ù„ 24-48 Ø³Ø§Ø¹Ø©.
ğŸ“± Ø³ØªØµÙ„Ùƒ Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨ Ù‚Ø±ÙŠØ¨Ø§Ù‹.

Ø´ÙƒØ±Ø§Ù‹ Ù„Ø«Ù‚ØªÙƒ Ø¨Ù†Ø§! ğŸ’™`;

      alert(successMessage);

      // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© ÙˆØ¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
      document.getElementById('returnModal').classList.add('hidden');
      document.getElementById('returnForm').reset();
      document.getElementById('otherReasonDiv').classList.add('hidden');

    } catch (error) {
      console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹:', error);
      alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
    } finally {
      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
      const submitBtn = e.target.querySelector('button[type="submit"]');
      submitBtn.textContent = originalText;
      submitBtn.disabled = false;
    }
  });

  // Ø¯Ø§Ù„Ø© ØªØ±Ø¬Ù…Ø© Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹
  function getReasonText(reason) {
    const reasons = {
      'defective': 'Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ø¹ÙŠØ¨',
      'wrong_item': 'Ù…Ù†ØªØ¬ Ø®Ø§Ø·Ø¦',
      'not_as_described': 'Ù„Ø§ ÙŠØ·Ø§Ø¨Ù‚ Ø§Ù„ÙˆØµÙ',
      'damaged': 'ÙˆØµÙ„ ØªØ§Ù„Ù',
      'changed_mind': 'ØªØºÙŠÙŠØ± ÙÙŠ Ø§Ù„Ø±Ø£ÙŠ'
    };
    return reasons[reason] || reason;
  }

  // Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ù„Ù„Ø£Ø¯Ù…Ù†
  async function sendReturnNotificationToAdmin(returnData) {
    try {
      const message = `ğŸ”´ Ø·Ù„Ø¨ Ø¥Ø±Ø¬Ø§Ø¹ Ø¬Ø¯ÙŠØ¯ Ù…Ù† AQRAB!

ğŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„: ${returnData.customerName}
ğŸ“± Ø§Ù„Ù‡Ø§ØªÙ: ${returnData.customerPhone}
ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬: ${returnData.productName}
ğŸ”¢ Ø§Ù„ÙƒÙ…ÙŠØ©: ${returnData.quantity}
ğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: ${returnData.refundAmount} Ø¬Ù†ÙŠÙ‡
ğŸ“ Ø§Ù„Ø³Ø¨Ø¨: ${returnData.returnReason}
${returnData.additionalDetails ? `ğŸ“‹ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©: ${returnData.additionalDetails}` : ''}
ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨: ${new Date().toLocaleString('ar-EG')}

âš ï¸ ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…`;

      const encodedMessage = encodeURIComponent(message);
      const apiUrl = `https://api.callmebot.com/whatsapp.php?phone=201026897739&text=${encodedMessage}&apikey=5722213`;

      const response = await fetch(apiUrl);

      if (response.ok) {
        console.log("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ù„Ù„Ø£Ø¯Ù…Ù† Ø¨Ù†Ø¬Ø§Ø­");
      } else {
        console.log("âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ù„Ù„Ø£Ø¯Ù…Ù†");
      }
    } catch (error) {
      console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹:", error);
    }
  }

  // ØªØ­Ø¯ÙŠØ« Ø¯Ø§Ù„Ø© displayOrder Ù„Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø¨
  const originalDisplayOrder = displayOrder;
  displayOrder = function(order, orderId = null) {
    currentOrderData = { ...order, id: orderId };
    originalDisplayOrder(order, orderId);
  };

</script>

</body>
</html>
